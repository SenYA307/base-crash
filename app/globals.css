@import "tailwindcss";

:root {
  --background: #0b1020;
  --foreground: #e6f0ff;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-geist-sans), Arial, Helvetica, sans-serif;
}

/* Hint pulsing animation - 1.5s total with fade out */
@keyframes hint-pulse {
  0% {
    box-shadow: 0 0 12px 4px rgba(0, 82, 255, 0.8), 0 0 24px 8px rgba(0, 82, 255, 0.4);
    transform: scale(1);
    opacity: 1;
  }
  20% {
    box-shadow: 0 0 24px 10px rgba(0, 82, 255, 1), 0 0 48px 20px rgba(0, 82, 255, 0.6);
    transform: scale(1.1);
    opacity: 1;
  }
  40% {
    box-shadow: 0 0 16px 6px rgba(0, 82, 255, 0.9), 0 0 32px 12px rgba(0, 82, 255, 0.5);
    transform: scale(1.02);
    opacity: 1;
  }
  60% {
    box-shadow: 0 0 20px 8px rgba(0, 82, 255, 1), 0 0 40px 16px rgba(0, 82, 255, 0.6);
    transform: scale(1.08);
    opacity: 1;
  }
  80% {
    box-shadow: 0 0 12px 4px rgba(0, 82, 255, 0.6), 0 0 24px 8px rgba(0, 82, 255, 0.3);
    transform: scale(1.02);
    opacity: 0.8;
  }
  100% {
    box-shadow: 0 0 4px 2px rgba(0, 82, 255, 0.2), 0 0 8px 4px rgba(0, 82, 255, 0.1);
    transform: scale(1);
    opacity: 0.5;
  }
}

.hint-highlight {
  animation: hint-pulse 1.5s ease-in-out forwards;
  z-index: 20;
  position: relative;
}

/* Floating score animation */
@keyframes float-up {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  40% {
    opacity: 1;
    transform: translateY(-25px) scale(1.15);
  }
  100% {
    opacity: 0;
    transform: translateY(-60px) scale(0.9);
  }
}

.float-score {
  animation: float-up 1.1s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* Tile base - full image, no frame */
.tile-cell {
  will-change: transform, opacity;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  transform: translate3d(0, 0, 0);
  border-radius: 8px;
  overflow: hidden;
  position: relative;
}

/* Tile image fills entire cell */
.tile-image {
  width: 100%;
  height: 100%;
  object-fit: contain;
  pointer-events: none;
  user-select: none;
  -webkit-user-drag: none;
}

/* Fallback tile (when image missing) */
.tile-fallback {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 14px;
  color: white;
  text-shadow: 0 1px 2px rgba(0,0,0,0.5);
}

/* Selection glow overlay */
.tile-selected {
  box-shadow: 0 0 0 3px white, 0 0 20px 4px rgba(255, 255, 255, 0.6);
  z-index: 10;
  transform: scale(1.08) translate3d(0, 0, 0);
}

/* Pressed state (swipe gesture active) */
.tile-pressed {
  transform: scale(0.95) translate3d(0, 0, 0);
  opacity: 0.9;
  transition: transform 50ms ease-out, opacity 50ms ease-out;
}

/* Adjacent highlight */
.tile-adjacent {
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.4);
}

/* Smooth easing for all tile transforms */
.tile-animate {
  transition: transform 280ms cubic-bezier(0.22, 1, 0.36, 1),
              opacity 200ms ease-out,
              box-shadow 150ms ease-out;
}

/* Clear animation */
@keyframes tile-clear {
  0% {
    transform: scale(1) translate3d(0, 0, 0);
    opacity: 1;
  }
  50% {
    transform: scale(1.15) translate3d(0, 0, 0);
    opacity: 0.8;
  }
  100% {
    transform: scale(0.3) translate3d(0, 0, 0);
    opacity: 0;
  }
}

.tile-clearing {
  animation: tile-clear 200ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
  pointer-events: none;
}

/* Safe area padding for mobile (notch, home indicator) */
.safe-area-padding {
  padding-top: env(safe-area-inset-top, 0);
  padding-bottom: env(safe-area-inset-bottom, 0);
  padding-left: env(safe-area-inset-left, 0);
  padding-right: env(safe-area-inset-right, 0);
}

.safe-area-bottom {
  padding-bottom: max(env(safe-area-inset-bottom, 0), 16px);
}

/* Scroll lock for game view */
.scroll-lock {
  overflow: hidden;
  position: fixed;
  width: 100%;
  height: 100%;
  touch-action: none;
  overscroll-behavior: none;
}

/* Combo overlay animation */
@keyframes combo-pop {
  0% {
    transform: scale(0.5);
    opacity: 0;
  }
  20% {
    transform: scale(1.2);
    opacity: 1;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
  80% {
    transform: scale(1.05);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 0;
  }
}

.combo-overlay {
  animation: combo-pop 1.2s ease-out forwards;
}

.combo-text {
  text-shadow: 0 0 40px rgba(0, 82, 255, 0.8), 0 4px 20px rgba(0, 0, 0, 0.5);
}
